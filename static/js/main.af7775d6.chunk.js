(this["webpackJsonpvoter-react"]=this["webpackJsonpvoter-react"]||[]).push([[0],{246:function(e,a,t){e.exports=t(447)},274:function(e,a){},276:function(e,a){},318:function(e,a){},319:function(e,a){},447:function(e,a,t){"use strict";t.r(a);var r=t(2),l=t.n(r),n=t(106),c=t.n(n),o=t(8),s=t.n(o),i=t(113),m=t(114),d=t(120),u=t(115),p=t(121),f=t(116),h=t.n(f),E=function(e){function a(){var e,t;Object(i.a)(this,a);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return(t=Object(d.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(l)))).state={selectedFile:null,photoidlabel:"Choose file"},t.fileSelectedHandler=function(e){t.setState({selectedFile:e.target.files[0],photoidlabel:e.target.files[0].name})},t.addVoter=function(e){var a,r;return s.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,e.preventDefault(),(a=new FormData).append("file",t.state.selectedFile,t.state.selectedFile.name),a.append("electorname",e.target.nameid.value),a.append("fathername",e.target.fatherid.value),a.append("dob",e.target.dobid.value),a.append("sex",e.target.sexid.value),a.append("address",e.target.addressid.value),a.append("mobile",e.target.mobilenoid.value),l.next=13,s.a.awrap(h.a.post("".concat("https://voter-app-api.herokuapp.com","/addvoter"),a));case 13:r=l.sent,alert(r.data.message),l.next=21;break;case 17:l.prev=17,l.t0=l.catch(0),alert(l.t0),console.error(l.t0);case 21:case"end":return l.stop()}}),null,null,[[0,17]])},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"card mt-5"},l.a.createElement("div",{className:"card-body"},l.a.createElement("h5",{className:"card-title mb-4 text-center"},"Voter Registration Form"),l.a.createElement("form",{className:"container d-inline-flex flex-column needs-validation",novalidate:!0,onSubmit:this.addVoter},l.a.createElement("div",{class:"form-group row"},l.a.createElement("label",{className:"col-4",for:"nameid"},"Elector's Name"),l.a.createElement("input",{type:"text",class:"form-control col-8",id:"nameid",placeholder:"Enter Full Name",required:!0})),l.a.createElement("div",{class:"form-group row"},l.a.createElement("label",{className:"col-4",for:"fatherid"},"Father's Name"),l.a.createElement("input",{type:"text",class:"form-control col-8",id:"fatherid",placeholder:"Enter Father's Full Name",required:!0})),l.a.createElement("div",{class:"form-group row d-flex"},l.a.createElement("label",{className:"col-4",for:"photoid"},"Photo"),l.a.createElement("div",{className:"col-8 custom-file"},l.a.createElement("input",{type:"file",className:"form-control custom-file-input",id:"photoid",onChange:this.fileSelectedHandler,ref:function(a){return e.fileInput=a},required:!0}),l.a.createElement("label",{class:"custom-file-label",id:"photoidlabel",for:"customFile"},this.state.photoidlabel))),l.a.createElement("div",{class:"form-group row"},l.a.createElement("label",{className:"col-4",for:"dobid"},"Date of Birth"),l.a.createElement("input",{type:"date",class:"form-control col-8",id:"dobid",placeholder:"Password",required:!0})),l.a.createElement("div",{class:"form-group row"},l.a.createElement("label",{className:"col-4",for:"sexid"},"Sex"),l.a.createElement("select",{class:"form-control col-8",id:"sexid"},l.a.createElement("option",null,"Male"),l.a.createElement("option",null,"Female"),l.a.createElement("option",null,"Other"))),l.a.createElement("div",{class:"form-group row"},l.a.createElement("label",{className:"col-4",for:"addressid"},"Address"),l.a.createElement("textarea",{class:"form-control col-8",row:"3",id:"addressid",required:!0})),l.a.createElement("div",{class:"form-group row"},l.a.createElement("label",{className:"col-4",for:"mobilenoid"},"Mobile no."),l.a.createElement("input",{type:"tel",class:"form-control col-8",id:"mobilenoid"})),l.a.createElement("button",{type:"submit",class:"btn btn-primary"},"Submit")))))}}]),a}(r.Component),v=t(119);function b(e){var a="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return a+=String.fromCharCode(e)})),window.btoa(a)}var g=t(26),N=g.e.create({page:{backgroundColor:"#ffffff"},rightColumn:{flexDirection:"column",width:"auto",paddingTop:30,paddingRight:15,"@media max-width: 400":{width:"100%",paddingRight:0},"@media orientation: landscape":{width:200}},container:{flex:1,padding:30,flexDirection:"row",paddingLeft:15,"@media max-width: 400":{paddingTop:10,paddingLeft:0}},leftColumn:{flexDirection:"column",width:170,paddingTop:30,paddingRight:15,"@media max-width: 400":{width:"100%",paddingRight:0},"@media orientation: landscape":{width:200}},title:{fontSize:35,fontWeight:"bold",marginBottom:10},image:{width:150,height:200,objectFit:"cover"}});function w(e){return console.log("pdf props",e),l.a.createElement(g.a,null,l.a.createElement(g.d,{size:"A4",style:N.page},l.a.createElement(g.g,{style:N.container},l.a.createElement(g.g,{style:N.leftColumn},l.a.createElement(g.b,{style:N.image,src:e.data.photo})),l.a.createElement(g.g,{style:N.rightColumn},l.a.createElement(g.f,{style:N.title},"Voter Detail"),l.a.createElement(g.f,null,"Elector's Name: ",e.data.electorname),l.a.createElement(g.f,null,"Father's Name: ",e.data.fathername),l.a.createElement(g.f,null,"Date of Birth: ",e.data.dob),l.a.createElement(g.f,null,"Sex: ",e.data.sex),l.a.createElement(g.f,null,"Address: ",e.data.address),l.a.createElement(g.f,null,"Mobile no: ",e.data.mobile)))))}var y=function(e){function a(){var e,t;Object(i.a)(this,a);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return(t=Object(d.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(l)))).searchVoter=function(e){e.preventDefault();var a={electorname:e.target.searchElecName.value,fathername:e.target.searchFatherName.value,address:e.target.searchAddress.value,dob:e.target.searchDob.value};Object.keys(a).forEach((function(e){return""===a[e]?delete a[e]:{}})),t.props.fetchVoters(a)},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"card shadow-sm mt-5"},l.a.createElement("div",{className:"card-body"},l.a.createElement("h5",{className:"card-title mb-4 text-center"},"Voter Search"),l.a.createElement("form",{className:"container d-inline-flex flex-column",onSubmit:this.searchVoter},l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{className:"col-4 ",htmlFor:"searchElecName"},"Elector's Name"),l.a.createElement("input",{class:"form-control col-8",type:"text",id:"searchElecName",placeholder:"Enter Elector full name"})),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{className:"col-4",htmlFor:"searchFatherName"},"Father's Name"),l.a.createElement("input",{class:"form-control col-8",type:"text",id:"searchFatherName",placeholder:"Enter Father full name"})),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{className:"col-4",htmlFor:"searchAddress"},"Address"),l.a.createElement("input",{class:"form-control col-8",type:"text",id:"searchAddress",placeholder:"Enter Address"})),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{className:"col-4",htmlFor:"searchDob"},"Date of birth"),l.a.createElement("input",{class:"form-control col-8",type:"date",id:"searchDob",placeholder:"Enter Date of birth"})),l.a.createElement("div",{className:"form-group mt-2 row"},l.a.createElement("button",{className:"btn w-100 btn-primary"},this.props.loading?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),l.a.createElement("span",null,"   loading..")):"Search"))))),this.props.voters.length>0&!this.props.loading?this.props.voters.map((function(e){return l.a.createElement("div",{className:"card shadow-sm mt-2 d-flex flex-row"},l.a.createElement("img",{className:"card-img-left",src:e.photo,alt:"profile",style:{width:100,height:"auto",objectFit:"cover"}}),l.a.createElement("div",{className:"d-flex w-100 flex-column justify-content-between"},l.a.createElement("div",{className:"d-flex m-2 justify-content-between"},l.a.createElement("h5",null,e.electorname),l.a.createElement("small",{className:""},"DOB: ",e.dob)),l.a.createElement("div",{className:"d-flex  mr-2 mb-2 ml-2 justify-content-between"},l.a.createElement("p",null,"Address: ",e.address),l.a.createElement(g.c,{document:l.a.createElement(w,{data:e}),fileName:"".concat(e.electorname,".pdf"),className:"btn btn-primary"},(function(e){return e.loading?"Loading document...":"Download Pdf"})))))})):l.a.createElement(l.a.Fragment,null))}}]),a}(r.Component);y.defaultProps={voters:[]};var x=Object(v.b)((function(e){return{voters:e.voterreducer.voters,loading:e.loadingreducer.loading}}),{fetchVoters:function(e){return function(a){var t;return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a({type:"ADD_VOTER",payload:!0}),r.next=5,s.a.awrap(h.a.post("".concat("https://voter-app-api.herokuapp.com","/getfilteredvoter"),e));case 5:(t=r.sent).data.map((function(e){var a="data:".concat(e.photo.contentType,";base64,"),t=b(e.photo.data.data);return e.photo=a+t,e})),a({type:"FETCH_VOTER",payload:t.data}),a({type:"ADD_VOTER",payload:!1}),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(0),alert(r.t0),console.error(r.t0);case 15:case"end":return r.stop()}}),null,null,[[0,11]])}}})(y),F=t(60),O=t(244),j=t(122),D={},A={loading:!1},C=Object(F.c)({voterreducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"FETCH_VOTER":return e.voters=a.payload,Object(j.a)({},e);default:return e}},loadingreducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ADD_VOTER":return e.loading=a.payload,Object(j.a)({},e);default:return e}}}),k=[O.a],V=Object(F.e)(C,{},Object(F.d)(F.a.apply(void 0,k))),S=t(125),R=t(61);var T=function(){return l.a.createElement(S.a,{basename:"/"},l.a.createElement(v.a,{store:V},l.a.createElement("nav",{className:"container nav mt-5 nav-tabs justify-content-center"},l.a.createElement(S.b,{className:"nav-item nav-link mr-2",activeClassName:"nav-item nav-link active",to:"/search"},"Search"),l.a.createElement(S.b,{className:"nav-item nav-link ml-2",activeClassName:"nav-item nav-link active",to:"/register"},"Register")),l.a.createElement("div",{className:"d-flex"},l.a.createElement(R.c,null,l.a.createElement(R.a,{path:"/search"},l.a.createElement(x,null)),l.a.createElement(R.a,{path:"/register"},l.a.createElement(E,null))))))};t(446);c.a.render(l.a.createElement(T,null),document.getElementById("root"))}},[[246,1,2]]]);
//# sourceMappingURL=main.af7775d6.chunk.js.map